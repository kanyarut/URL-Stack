{% for bean in beans %}
	<article>
	<div class="meta">
	 <a href="/weblink/edit?k={{ bean.key }}" class="edit"><img src="/dir/img/edit.gif" alt="Edit" /></a>
	 <a href="/weblink/delete?k={{ bean.key }}" class="delete"><img src="/dir/img/mini-trash.png" alt="Read" /></a>
	</div>
	<h4><a href="/weblink/read?k={{ bean.key }}" class="read"><img src="/dir/img/icon-book.png" alt="Read" /> {{ bean.title }}</a></h4>
	<a href="/weblink/visit?k={{ bean.key }}" class="external">{{ bean.url }}</a> <em>{{ bean.tags }}</em>
	
	<div class="meta">
	<span class="showhit counter">{{ bean.hit }} hit</span> <span class="showread counter">{{ bean.read }}% read</span>
	</div>
	</article>
{% endfor %}
<script type="text/javascript">
var key,percent,oldp,timer,savedp=0;
$('input#searchbox').quicksearch('div#linkslist article');
$('a.read').colorbox({width:"90%", height:"90%", iframe:true, speed: 200,
onComplete:function(){
 	timer = setTimeout("saveProgress()",3000);
}, onClosed:function(){ 
	saveProgress();
	clearTimeout(timer);
}});

function saveProgress(){
	if(savedp < percent){
		saveReadingProgress(key,percent,oldp);
		savedp = percent;
	}
	setTimeout("saveProgress()",3000);
}


function childScrollHandler(k,p,o){
	key = k;
	percent = p;
	oldp = o;
}

$('a.edit').colorbox({width:"400px", height:"300px", iframe:true, speed: 200});
</script>